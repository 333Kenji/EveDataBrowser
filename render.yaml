databases:
  - name: eve-data-browser-db
    # Request free tier; adjust if workspace rejects.
    plan: free

services:
  - type: web
    name: eve-data-browser
    env: docker
    plan: free
    repo: https://github.com/333Kenji/EveDataBrowser
    branch: main
    dockerfilePath: Dockerfile
    dockerContext: .
    healthCheckPath: /health
    autoDeploy: true
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: eve-data-browser-db
          property: connectionString
      - key: API_CORS_ALLOW_ORIGINS
        value: "https://eve-data-browser.onrender.com"
      - key: API_CACHE_TAXONOMY_MAX_AGE
        value: "3600"
      - key: API_CACHE_TAXONOMY_STALE
        value: "120"
      - key: API_CACHE_ITEMS_MAX_AGE
        value: "3600"
      - key: API_CACHE_ITEMS_STALE
        value: "120"
      - key: API_CACHE_MARKET_MAX_AGE
        value: "300"
      - key: API_CACHE_MARKET_STALE
        value: "120"
      - key: FEATURE_STRUCTURE_ORDERS
        value: "false"
      - key: STRUCTURE_ORDER_STRUCTURE_IDS
        value: ""
      - key: SDE_BOOTSTRAP_ON_START
        value: "false"
      - key: SDE_HEAP_MB
        value: "256"
